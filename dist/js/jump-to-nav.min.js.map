{"version":3,"sources":["jump-to-nav.js"],"names":["jumpToElement","document","querySelectorAll","length","scriptLinkage","getElementById","querySelector","param","activeSections","topLocation","linkCopy","bottomLocation","autoClose","heading","zIndex","search","align","nest","css","urlParam","URLSearchParams","getAttribute","split","get","embeddedStyleTag","createElement","setAttribute","jumpToCSS","textContent","head","appendChild","navWrapperEl","classList","add","HTML","innerHTML","body","style","top","bottom","alignment","forEach","item","navElement","navList","searchTermsTitle","searchTermsID","index","options","title","semiColonSplit","undefined","splitOn","optionString","trim","parseOption","hasAttribute","titleReady","str","replace","match","toLowerCase","toUpperCase","camelize","linkID","linkListItem","linkTitleText","linkATag","parentElement","closest","parentListItem","push","itemControls","cloneNode","remove","addEventListener","linkHash","currentUrl","window","location","href","navigator","clipboard","writeText","innerText","itemBubble","includes","setTimeout","searchEl","searchInput","autoCompleteLinkage","script","onload","autoCompleteJS","autoComplete","selector","placeHolder","data","src","resultItem","highlight","events","input","[object Object]","value","start","event","selection","detail","select","arr","searchValue","i","findIndex","click","key","focus","preventDefault","targetID","scrollIntoView","behavior","history","pushState","childUl","parentNode","lastChild","minimizeButton","el","panelHeader","panelBody","parseInt","getBoundingClientRect","jumpToHeaderHeight","offsetHeight","maxHeight","setMaxHeight","sectionsEl","navEl","observer","IntersectionObserver","items","isIntersecting","target","root","rootMargin","threshold","observe","activeSection","withinBoundaries","composedPath","contains"],"mappings":"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","sourcesContent":["/*!\n    * Jump to navigation v1.3.3\n    * Need description.\n    *\n    * Copyright 2022 Marshall Crosby\n    * https://marshallcrosby.com\n*/\n\n\n/* ------------------------------------------------------------------------------\n    **TODO:\n    1. Query params\n        ✓ • Allow custom Y location\n        ✓ • Make nesting an option\n        ✓ • Allow custom z-index\n        ✓ • Allow external css\n        • Placement (left, right, top, bottom, custom)\n    ✓ 2. Click outside closes panel\n    ✓ 3. CSS dynamic max-height\n    ✓ 4. Focus nav item on current section in view\n    5. Add static site navigation\n    ✓ 6. Dynamic IDs if none\n    7. Better verbiage/names\n    8. Direction of menu opening\n-------------------------------------------------------------------------------- */\n\n\n\n(function () {\n    \"use strict\"\n    \n    const jumpToElement = document.querySelectorAll('[data-jtn-anchor]');\n\n    if (jumpToElement.length) {\n\n        /* --------------------------------------------------------------------------\n            Query params\n        ---------------------------------------------------------------------------- */\n\n        const scriptLinkage = document.getElementById('jump-to-nav-js') || document.querySelector('script[src*=jump-to-nav]');\n        \n        const param = {\n            activeSections: null,\n            topLocation: null,\n            linkCopy: null,\n            bottomLocation: null,\n            autoClose: null,\n            heading: null,\n            zIndex: null,\n            search: null,\n            align: null,\n            nest: null,\n            css: null\n        }\n    \n        if (scriptLinkage) {\n            const urlParam = new URLSearchParams(scriptLinkage.getAttribute('src').split('?')[1]);\n            \n            param.activeSections = urlParam.get('active-section');\n            param.topLocation = urlParam.get('top');\n            param.linkCopy = urlParam.get('link-copy');\n            param.bottomLocation = urlParam.get('bottom');\n            param.autoClose = urlParam.get('auto-close');\n            param.heading = urlParam.get('heading');\n            param.zIndex = urlParam.get('z-index');\n            param.search = urlParam.get('search');\n            param.align = urlParam.get('align');\n            param.nest = urlParam.get('nest');\n            param.css = urlParam.get('css');\n        }\n    \n    \n        /* --------------------------------------------------------------------------\n            Render nav css\n        ---------------------------------------------------------------------------- */\n    \n        if (param.css !== 'external') {\n            const embeddedStyleTag = document.createElement('style');\n            embeddedStyleTag.setAttribute('id', 'jumpToNavStyle');\n        \n            const jumpToCSS = `//import jump-to-nav.css`;\n        \n            // Apply in page styles to style tag\n            embeddedStyleTag.textContent = jumpToCSS;\n        \n            // Add in page styles to head\n            document.head.appendChild(embeddedStyleTag);\n        }\n    \n    \n        /* --------------------------------------------------------------------------\n            Create navigation element and populate it\n        ---------------------------------------------------------------------------- */\n        \n        //\n        // Render nav elements\n        //\n    \n        const navWrapperEl = document.createElement('div');\n        navWrapperEl.classList.add('jump-to-nav');\n    \n        const HTML = `//import _jump-to-nav.html`;\n        navWrapperEl.innerHTML = HTML;\n        document.body.appendChild(navWrapperEl);\n\n        if (param.topLocation !== null) {\n            navWrapperEl.style.top = param.topLocation;\n        }\n        \n        if (param.bottomLocation !== null) {\n            navWrapperEl.style.top = 'auto';\n            navWrapperEl.style.bottom = param.bottomLocation;\n        }\n        \n        if (param.zIndex !== null) {\n            navWrapperEl.style.zIndex = param.zIndex;\n        }\n\n\n        //\n        // Alignment\n        //\n\n        if (param.align !== null) {\n            const alignment = param.align.split(',');\n\n            if (alignment !== '') {\n                alignment.forEach((item) => {\n                    navWrapperEl.classList.add('jump-to-nav--align-' + item);\n                });\n            }\n        }\n\n\n        //\n        // Set custom heading if param is set\n        //\n\n        if (param.heading !== null) {\n            const headingEl = navWrapperEl.querySelector('.jump-to-nav__heading');\n\n            headingEl.textContent = param.heading;\n        }\n    \n    \n        //\n        // Setup elements and add li and links\n        //\n    \n        const navElement = document.querySelector('.jump-to-nav__nav');\n        const navList = document.createElement('ul');\n        navList.classList.add('jump-to-nav__list');\n    \n        navElement.appendChild(navList);\n    \n        let searchTermsTitle = [];\n        let searchTermsID = [];\n        \n        jumpToElement.forEach((item, index) => {\n\n            let options = null;\n            options = {\n                title: null\n            };\n    \n            if (item.getAttribute('data-jtn-anchor') !== '') {\n                const semiColonSplit = item.getAttribute('data-jtn-anchor').split(';');\n                \n                // Assign option values if any\n                semiColonSplit.forEach((item, index) => {\n                    if (semiColonSplit[index].split('title:')[1] !== undefined) {\n                        options.title = parseOption(semiColonSplit[index], 'title');\n                    }\n                });          \n            }\n            \n            // Assign id if none is found\n            if (!item.hasAttribute('id')) {\n                let titleClean = options.title.replace(/[^a-z0-9]/gi, ' ');\n                let titleReady = camelize(titleClean);\n                item.setAttribute('id', titleReady);\n            }\n\n            const linkID = item.getAttribute('id');\n            const linkListItem = document.createElement('li');\n            \n            linkListItem.classList.add('jump-to-nav__item');\n            linkListItem.setAttribute('data-jump-id', linkID);\n                \n            const linkTitleText = (options.title !== null) ? options.title : linkID;\n            const linkATag = `\n                <a class=\"jump-to-nav__link\" href=\"#${ linkID }\">\n                    <span>${linkTitleText}</span>\n                </a>\n            `;\n    \n            linkListItem.innerHTML = linkATag;\n    \n            navList.appendChild(linkListItem);\n    \n            if (item.parentElement.closest('[data-jtn-anchor]')) {\n                let parentListItem = item.parentElement.closest('[data-jtn-anchor]');\n                parentListItem.setAttribute('data-jump-has-child', 'true');\n                linkListItem.setAttribute('data-jump-parent', parentListItem.getAttribute('id'));    \n            }\n    \n            searchTermsTitle.push(linkTitleText);\n            searchTermsID.push(linkID);\n\n        });\n\n        \n        //\n        // Add copy button to each anchor link\n        //\n\n        const itemControls = navElement.querySelector('.jump-to-nav__item-controls');\n        \n        if (param.linkCopy !== null) {\n            const navListItem = navList.querySelectorAll('li');\n            \n            navListItem.forEach((item) => {\n                item.appendChild(itemControls.cloneNode(true));\n            });\n            \n            itemControls.remove();\n\n            const linkCopyButtonEl = navList.querySelectorAll('.jump-to-nav__copy-button');\n\n            linkCopyButtonEl.forEach((item) => {\n                item.addEventListener('click', () => {\n                    const linkHash = item.closest('.jump-to-nav__item').querySelector('.jump-to-nav__link').getAttribute('href');\n                    const currentUrl = window.location.href.split('#');\n                   \n                    navigator.clipboard.writeText(currentUrl[0] + linkHash);\n                    item.closest('.jump-to-nav__item').querySelector('.jump-to-nav__copy-bubble').innerText = 'Copied';\n                });\n\n                item.addEventListener('mouseout', function () {\n                    let itemBubble = item.closest('.jump-to-nav__item').querySelector('.jump-to-nav__copy-bubble');\n                    let itemBubbleText = itemBubble.innerText.toLowerCase();\n                    \n                    if (itemBubbleText.includes('copied')) {\n                        setTimeout(function () {\n                            itemBubble.innerText = 'Copy link';\n                        }, 100);\n                    }\n                });\n            });\n        } else {\n            itemControls.remove();\n        }\n\n        \n        const searchEl = document.querySelector('.jump-to-nav__search');\n        const searchInput = searchEl.querySelector('.jump-to-nav__search-input');\n\n        if (param.search !== null) {\n            \n            // Thanks to autoComplete.js. Project repo: https://github.com/TarekRaafat/autoComplete.js\n            const autoCompleteLinkage = `https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@10.2.7/dist/autoComplete.min.js`;\n            const script = document.createElement('script');\n            script.onload = function () {\n                const autoCompleteJS = new autoComplete({\n                    selector: \"#jumpToNavAutoComplete\",\n                    placeHolder: 'Search',\n                    data: {\n                        src: searchTermsTitle\n                    },\n                    resultItem: {\n                        highlight: true,\n                    },\n                    events: {\n                        input: {\n                            focus() {\n                                if (autoCompleteJS.input.value.length) {\n                                    autoCompleteJS.start();\n                                }\n                            },\n                            selection(event) {\n                                const feedback = event.detail;\n                                \n                                const selection = feedback.selection.value;\n                                autoCompleteJS.input.value = selection;\n                                autoCompleteJS.input.select();\n                                \n                                const associatedLink = navWrapperEl.querySelector(`[href=\"#${searchTermsID[findIndex(autoCompleteJS.data.src, selection)]}\"]`)\n                                associatedLink.click();\n                            },\n                            keyup(event) {\n                                if (event.key === 'Enter' && !navWrapperEl.querySelector(`[aria-selected=\"true\"]`)) {\n                                    const firstSuggestion = navWrapperEl.querySelector(`#autoComplete_result_0`);\n                                    firstSuggestion.click();\n                                    autoCompleteJS.input.select();\n                                }\n                            },\n                        },\n                    },\n                });\n                \n                searchInput.addEventListener('input', () => {\n                    if (searchInput && searchInput.value) {\n                        searchEl.classList.add('jump-to-nav__search--has-value');\n                    } else {\n                        searchEl.classList.remove('jump-to-nav__search--has-value');\n                    }\n                });\n\n                const searchClear = searchEl.querySelector('.jump-to-nav__search-clear');\n                searchClear.addEventListener('click', () => {\n                    searchInput.value = '';\n                    searchEl.classList.remove('jump-to-nav__search--has-value');\n                    searchInput.focus();\n                })\n\n                searchEl.classList.remove('jump-to-nav__search--loading');\n            };\n            script.src = autoCompleteLinkage;\n            document.head.appendChild(script);\n        } else {\n            searchEl.remove();\n        }\n\n        //\n        // Link clicks. Use scrollIntoView instead of browser default so I can hyjack the focus to the search element (if need-be).\n        //\n\n        const jumpToLink = navWrapperEl.querySelectorAll('.jump-to-nav__link');\n        \n        jumpToLink.forEach((item) => {\n            item.addEventListener('click', function (event) {\n                event.preventDefault();\n                const targetID = item.getAttribute('href').replace('#', '');\n                \n                document.getElementById(targetID).scrollIntoView({\n                    behavior: 'smooth'\n                });\n                \n                history.pushState(null, null, `#${targetID}`);\n                \n                if (searchEl) {\n                    searchInput.value = item.innerText;\n                    searchEl.classList.add('jump-to-nav__search--has-value');\n                }\n            });\n        });\n\n    \n        //\n        // Nest li(s) if jumpToElement is nested\n        //\n    \n        if (param.nest !== null) {\n            const linkChildren = navElement.querySelectorAll('[data-jump-parent]');\n    \n            linkChildren.forEach((item, index) => {\n                const parentItem = navElement.querySelector('[data-jump-id=\"' + item.getAttribute('data-jump-parent') + '\"]');\n        \n                parentItem.appendChild(item);\n            });\n        \n        \n            //\n            // Add ul inside items with children\n            //\n            \n            const nestedChildren = navElement.querySelectorAll('[data-jump-id]');\n            \n            nestedChildren.forEach((item, index) => {\n                if (item.querySelector('[data-jump-parent]')) {\n                    var childUl = document.createElement('ul');\n                    childUl.classList.add('jump-to-nav__nested-list')\n                    item.appendChild(childUl);\n                }\n            });\n        \n        \n            //\n            // Move unwrapped list items into ul\n            //\n        \n            const unwrapListItems = navElement.querySelectorAll('[data-jump-id] > [data-jump-id]');\n        \n            unwrapListItems.forEach((item, index) => {\n                const siblingUl = item.parentNode.lastChild;\n        \n                siblingUl.appendChild(item);\n            });\n        }\n    \n    \n        //\n        // Maximize / minimize buttons\n        //\n    \n        const maximizeButton = navWrapperEl.querySelector('.jump-to-nav__maximize');\n    \n        maximizeButton.addEventListener('click', function () {\n            navWrapperEl.classList.add('jump-to-nav--showing');\n        });\n    \n        const minimizeButton = navWrapperEl.querySelector('.jump-to-nav__minimize');\n    \n        minimizeButton.addEventListener('click', function () {\n            navWrapperEl.classList.remove('jump-to-nav--showing');\n        });\n    \n\n        //       \n        // Run max height function\n        //\n        setMaxHeight(navWrapperEl);\n\n\n        //\n        // Run active section function\n        //\n\n        if (param.activeSections !== null) {\n            activeSection('[data-jtn-anchor]', '.jump-to-nav');\n        }\n\n\n        //\n        // Click outside\n        //\n\n        if (param.autoClose !== null) {\n            document.addEventListener('click', function (event) {\n                const withinBoundaries = event.composedPath().includes(navWrapperEl);\n                \n                if (navWrapperEl.classList.contains('jump-to-nav--showing')) {\n                    if (!withinBoundaries) {\n                        minimizeButton.click();\n                    }\n                }\n            });\n        }\n    }\n\n    /* --------------------------------------------------------------------------\n        Functions\n    ---------------------------------------------------------------------------- */\n\n    //\n    // Parse options (function)\n    //\n\n    function parseOption(splitOn, optionString) {\n        return splitOn.split(optionString + ':')[1].trim();\n    }\n\n\n    //\n    // Set height for overflow scrolling if needed\n    //\n\n    function setMaxHeight(el) {\n        const panelHeader = document.querySelector('.jump-to-nav__header');\n        const panelBody = document.querySelector('.jump-to-nav__body');\n        const topLocation = parseInt(el.getBoundingClientRect().top);\n        const jumpToHeaderHeight = parseInt(panelHeader.offsetHeight);\n        const maxHeight = (topLocation + jumpToHeaderHeight) + 60;\n\n        panelBody.style.maxHeight = 'calc(100vh - ' + maxHeight + 'px)';\n    }\n\n\n    //\n    // Set active class on nav item if section is in view\n    //\n\n    function activeSection(sectionsEl, navEl) {\n        const jumpToElement = document.querySelectorAll(sectionsEl);\n        const navElement = document.querySelector(navEl);\n        const options = {\n            root: null,\n            rootMargin: '0px 0px -20% 0px',\n            threshold: 0.5\n        }\n        \n        const observer = new IntersectionObserver( (items, observer) => {\n            for (let i = 0; i < items.length; i++) {\n                if (items[i].isIntersecting) {\n                    navElement.querySelector('[data-jump-id=\"' + items[i].target.getAttribute('id') + '\"]').classList.add('jump-to-nav__item--active');\n                } else {\n                    navElement.querySelector('[data-jump-id=\"' + items[i].target.getAttribute('id') + '\"]').classList.remove('jump-to-nav__item--active');\n                }\n            }\n        }, options);\n\n        for (let i = 0; i < jumpToElement.length; i++) {\n            observer.observe(jumpToElement[i]);\n        }\n    }\n\n\n    //\n    // Camel case string\n    //\n\n    function camelize(str) {\n        return str.replace(/(?:^\\w|[A-Z]|\\b\\w|\\s+)/g, function(match, index) {\n        if (+match === 0) return \"\";\n            return index === 0 ? match.toLowerCase() : match.toUpperCase();\n        });\n    }\n\n\n    //\n    // Find index of array item\n    //\n\n    function findIndex(arr, searchValue ){\n        for (let i = 0; i < arr.length; ++i) {\n            if (arr[i] === searchValue) {\n                return i;\n            }\n            }\n        }\n})();"]}